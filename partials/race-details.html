<div class="row">
  <div ng-include src="'partials/shared/error-message.html'" ng-show="showErrorAlert"></div>
  <div ng-include src="'partials/shared/success-message.html'" ng-show="showSuccessAlert"></div>
</div>
<!-- TODO: one partial for both error and success -->
<div class="row" ng-show="isLoggedIn()">
  <div class="col-md-12 panel panel-default race-menu">
    <div class="panel-body">
      <a href="#" ng-click="switchWantsToEdit()" class="btn btn-default" ng-class="{'active':wantsToEdit}">Redigera lopp</a>
      <a href="#" ng-click="delete()" class="btn btn-danger">Radera lopp</a>
    </div>
  </div>
</div>
<div class="row">
  <!-- Show this if edit -->
  <div ng-show="wantsToEdit" class="col-md-6 panel panel-default form-panel">
    <div class="panel-heading">
      <h2 class="panel-title">Redigera lopp</h2>
    </div>
    <div class="panel-body" ng-include="'partials/shared/race-form.html'"></div>
  </div>

  <!-- Show this if not edit -->
  <div ng-show="!race.wantsToEdit" class="col-md-6 panel panel-default race-panel">
    <div class="panel-heading">
      <h2 class="panel-title">{{race.name}}</h2>
    </div>
    <ul class="list-group">
      <li class="list-group-item">Arrangör: {{race.organiser}}</li>
      <li class="list-group-item">Ort: {{race.city}}</li>
      <li class="list-group-item">Datum: {{race.date | date:'yyyy-MM-dd'}}</li>
      <li class="list-group-item">Distans: {{race.distance}} km</li>
      <li ng-show="race.web_site" class="list-group-item"><a target="_blank" href="{{race.web_site}}">Loppets webbsida</a></li>
      <li class="list-group-item">{{race.tag_list}}</li>
    </ul>
  </div>
  <div class="col-md-6 panel panel-default map">
    <div id="map" class="panel-body">
    </div>
  </div>
</div>

</div>
<div class="row">
  <div class="col-md-12 panel panel-default no-padding">
    <div class="panel-heading">
      <h3 class="panel-title">Närliggande lopp</h3>
    </div>
    <div class="panel-body">
      <ul class="nearby-races-list">
        <li data-ng-repeat="race in race.nearby_races"><a class="btn btn-info btn-sm" href="{{race.self_path}}">{{race.name}}</a></li>
      </ul>
    </div>
  </div>

</div>
<div class="row">
  <a href="/" type="button" class="btn btn-default" aria-label="Left Align">
    <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
  </a>
</div>
